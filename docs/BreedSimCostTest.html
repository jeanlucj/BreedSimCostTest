<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Jean-Luc Jannink" />


<title>Use BreedSimCost</title>

<script src="site_libs/header-attrs-2.6/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<link rel="icon" href="https://github.com/workflowr/workflowr-assets/raw/master/img/reproducible.png">
<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>



<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">BreedSimCostTest</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="license.html">License</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Use BreedSimCost</h1>
<h4 class="author">Jean-Luc Jannink</h4>
<h4 class="date">5/8/2021</h4>

</div>


<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-report" data-toggle="collapse" data-target="#workflowr-report">
<span class="glyphicon glyphicon-list" aria-hidden="true"></span> workflowr <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
</button>
</p>
<div id="workflowr-report" class="collapse">
<ul class="nav nav-tabs">
<li class="active">
<a data-toggle="tab" href="#summary">Summary</a>
</li>
<li>
<a data-toggle="tab" href="#checks"> Checks <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> </a>
</li>
<li>
<a data-toggle="tab" href="#versions">Past versions</a>
</li>
</ul>
<div class="tab-content">
<div id="summary" class="tab-pane fade in active">
<p>
<strong>Last updated:</strong> 2021-05-15
</p>
<p>
<strong>Checks:</strong> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> 7 <span class="glyphicon glyphicon-exclamation-sign text-danger" aria-hidden="true"></span> 0
</p>
<p>
<strong>Knit directory:</strong> <code>BreedSimCostTest/</code> <span class="glyphicon glyphicon-question-sign" aria-hidden="true" title="This is the local directory in which the code in this file was executed."> </span>
</p>
<p>
This reproducible <a href="http://rmarkdown.rstudio.com">R Markdown</a> analysis was created with <a
  href="https://github.com/jdblischak/workflowr">workflowr</a> (version 1.6.2). The <em>Checks</em> tab describes the reproducibility checks that were applied when the results were created. The <em>Past versions</em> tab lists the development history.
</p>
<hr>
</div>
<div id="checks" class="tab-pane fade">
<div id="workflowr-checks" class="panel-group">
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRMarkdownfilestronguptodate"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>R Markdown file:</strong> up-to-date </a>
</p>
</div>
<div id="strongRMarkdownfilestronguptodate" class="panel-collapse collapse">
<div class="panel-body">
<p>Great! Since the R Markdown file has been committed to the Git repository, you know the exact version of the code that produced these results.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongEnvironmentstrongempty"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Environment:</strong> empty </a>
</p>
</div>
<div id="strongEnvironmentstrongempty" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! The global environment was empty. Objects defined in the global environment can affect the analysis in your R Markdown file in unknown ways. For reproduciblity it’s best to always run the code in an empty environment.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSeedstrongcodesetseed20210513code"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Seed:</strong> <code>set.seed(20210513)</code> </a>
</p>
</div>
<div id="strongSeedstrongcodesetseed20210513code" class="panel-collapse collapse">
<div class="panel-body">
<p>The command <code>set.seed(20210513)</code> was run prior to running the code in the R Markdown file. Setting a seed ensures that any results that rely on randomness, e.g. subsampling or permutations, are reproducible.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSessioninformationstrongrecorded"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Session information:</strong> recorded </a>
</p>
</div>
<div id="strongSessioninformationstrongrecorded" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Recording the operating system, R version, and package versions is critical for reproducibility.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongCachestrongnone"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Cache:</strong> none </a>
</p>
</div>
<div id="strongCachestrongnone" class="panel-collapse collapse">
<div class="panel-body">
<p>Nice! There were no cached chunks for this analysis, so you can be confident that you successfully produced the results during this run.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongFilepathsstrongrelative"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>File paths:</strong> relative </a>
</p>
</div>
<div id="strongFilepathsstrongrelative" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Using relative paths to the files within your workflowr project makes it easier to run your code on other machines.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRepositoryversionstrongahrefhttpsgithubcomjeanlucjBreedSimCostTesttree4e675da71dcacd99d2e7ee57fad0cc22ee482b1ctargetblank4e675daa"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Repository version:</strong> <a href="https://github.com/jeanlucj/BreedSimCostTest/tree/4e675da71dcacd99d2e7ee57fad0cc22ee482b1c" target="_blank">4e675da</a> </a>
</p>
</div>
<div id="strongRepositoryversionstrongahrefhttpsgithubcomjeanlucjBreedSimCostTesttree4e675da71dcacd99d2e7ee57fad0cc22ee482b1ctargetblank4e675daa" class="panel-collapse collapse">
<div class="panel-body">
<p>
Great! You are using Git for version control. Tracking code development and connecting the code version to the results is critical for reproducibility.
</p>
<p>
The results in this page were generated with repository version <a href="https://github.com/jeanlucj/BreedSimCostTest/tree/4e675da71dcacd99d2e7ee57fad0cc22ee482b1c" target="_blank">4e675da</a>. See the <em>Past versions</em> tab to see a history of the changes made to the R Markdown and HTML files.
</p>
<p>
Note that you need to be careful to ensure that all relevant files for the analysis have been committed to Git prior to generating the results (you can use <code>wflow_publish</code> or <code>wflow_git_commit</code>). workflowr only checks the R Markdown file, but you know if there are other scripts or data files that it depends on. Below is the status of the Git repository when the results were generated:
</p>
<pre><code>
Ignored files:
    Ignored:    .Rproj.user/
    Ignored:    analysis/BreedSimCostTest.html
    Ignored:    analysis/figure/
    Ignored:    data/.DS_Store
    Ignored:    data/_optRes.rds
    Ignored:    data/allBatches.rds
    Ignored:    data/allPercentRanges.rds

</code></pre>
<p>
Note that any generated files, e.g. HTML, png, CSS, etc., are not included in this status report because it is ok for generated content to have uncommitted changes.
</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div id="versions" class="tab-pane fade">

<p>
These are the previous versions of the repository in which changes were made to the R Markdown (<code>analysis/BreedSimCostTest.Rmd</code>) and HTML (<code>docs/BreedSimCostTest.html</code>) files. If you’ve configured a remote Git repository (see <code>?wflow_git_remote</code>), click on the hyperlinks in the table below to view the files as they were in that past version.
</p>
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
File
</th>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
<th>
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/jeanlucj/BreedSimCostTest/blob/4e675da71dcacd99d2e7ee57fad0cc22ee482b1c/analysis/BreedSimCostTest.Rmd" target="_blank">4e675da</a>
</td>
<td>
jeanlucj
</td>
<td>
2021-05-15
</td>
<td>
Last cosmetics to publish
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/jeanlucj/BreedSimCostTest/blob/2efa153c178d0d705ed5eac67e5a8b4d60f889ad/analysis/BreedSimCostTest.Rmd" target="_blank">2efa153</a>
</td>
<td>
jeanlucj
</td>
<td>
2021-05-15
</td>
<td>
New command to save intermediate results. Saving only happens if that’s true and during debugging
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/jeanlucj/BreedSimCostTest/blob/c970f3878cb41209447e6341385b1fb2aecee14f/analysis/BreedSimCostTest.Rmd" target="_blank">c970f38</a>
</td>
<td>
jeanlucj
</td>
<td>
2021-05-15
</td>
<td>
More or less through initial dumb debugging
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/jeanlucj/BreedSimCostTest/blob/5c329502ef38abf2e58e0694785080cf62b8e23f/analysis/BreedSimCostTest.Rmd" target="_blank">5c32950</a>
</td>
<td>
jeanlucj
</td>
<td>
2021-05-14
</td>
<td>
Changes to help debug and ignore temporary debug files
</td>
</tr>
</tbody>
</table>
</div>
<hr>
</div>
</div>
</div>
<div id="load-packages" class="section level3">
<h3>Load packages</h3>
<pre class="r"><code>ip &lt;- installed.packages()
packages_used &lt;- c(&quot;AlphaSimR&quot;, &quot;tidyverse&quot;, 
                   &quot;workflowr&quot;, &quot;here&quot;, &quot;devtools&quot;)
for (package in packages_used){
  if (!(package %in% ip[,&quot;Package&quot;])) install.packages(package)
}

packages_devel &lt;- c(&quot;BreedSimCost&quot;)
for (package in packages_devel){
  if (!(package %in% ip[,&quot;Package&quot;])){
    devtools::install_github(paste0(&quot;jeanlucj/&quot;, package), ref=&quot;master&quot;,
                             build_vignettes=F)
  }
}
library(BreedSimCost)

here::i_am(&quot;analysis/BreedSimCostTest.Rmd&quot;)

random_seed &lt;- 45678
set.seed(random_seed)</code></pre>
</div>
<div id="illustrate-using-the-functions-in-simplebreedsim" class="section level3">
<h3>Illustrate using the functions in SimpleBreedSim</h3>
<pre class="r"><code>bsd &lt;- initializeProgram(
         here::here(&quot;data&quot;, &quot;FounderCtrlFile.txt&quot;),
         here::here(&quot;data&quot;, &quot;SchemeCtrlFile.txt&quot;),
         here::here(&quot;data&quot;, &quot;CostsCtrlFile.txt&quot;), 
         here::here(&quot;data&quot;, &quot;OptimizationCtrlFile.txt&quot;)
                         )</code></pre>
<pre class="r"><code># Year 1
bsd$year &lt;- bsd$year+1
bsd &lt;- makeVarietyCandidates(bsd)

entriesSDN &lt;- bsd$varietyCandidates@id
bsd &lt;- runVDPtrial(bsd, &quot;SDN&quot;, entriesSDN)

parents &lt;- selectParentsBurnIn(bsd)
bsd &lt;- makeCrossesBurnIn(bsd, parents)

# Year 2
bsd$year &lt;- bsd$year+1
bsd &lt;- makeVarietyCandidates(bsd)

entries &lt;- chooseTrialEntries(bsd, toTrial=&quot;SDN&quot;)
bsd &lt;- runVDPtrial(bsd, &quot;SDN&quot;, entries)
entries &lt;- chooseTrialEntries(bsd, fromTrial=&quot;SDN&quot;, toTrial=&quot;CET&quot;)
bsd &lt;- runVDPtrial(bsd, &quot;CET&quot;, entries)

parents &lt;- selectParentsBurnIn(bsd)
bsd &lt;- makeCrossesBurnIn(bsd, parents)

# Year 3 and onward
for (burnIn in 1:bsd$nBurnInCycles){
  bsd$year &lt;- bsd$year+1
  bsd &lt;- makeVarietyCandidates(bsd)
  
  entries &lt;- chooseTrialEntries(bsd, toTrial=&quot;SDN&quot;)
  bsd &lt;- runVDPtrial(bsd, &quot;SDN&quot;, entries)
  entries &lt;- chooseTrialEntries(bsd, fromTrial=&quot;SDN&quot;, toTrial=&quot;CET&quot;)
  bsd &lt;- runVDPtrial(bsd, &quot;CET&quot;, entries)
  entries &lt;- chooseTrialEntries(bsd, fromTrial=&quot;CET&quot;, toTrial=&quot;PYT&quot;)
  bsd &lt;- runVDPtrial(bsd, &quot;PYT&quot;, entries)

  parents &lt;- selectParentsBurnIn(bsd)
  bsd &lt;- makeCrossesBurnIn(bsd, parents)
}
plot(AlphaSimR::gv(bsd$varietyCandidates))</code></pre>
<p><img src="figure/BreedSimCostTest.Rmd/Fill%20variety%20development%20pipeline-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>burnedInBSD &lt;- bsd</code></pre>
<pre class="r"><code># This is code from the package that you can run
# In the package, it&#39;s in the function runWithBudget
  startValues &lt;- calcCurrentStatus(bsd)
  
  for (twoPart in 1:bsd$nCyclesToRun){
    bsd$year &lt;- bsd$year+1
    bsd &lt;- makeVarietyCandidates(bsd)
    
    # Within the year, sequentially run the VDP...
    for (stage in 1:bsd$nStages){
      entries &lt;- chooseTrialEntries(bsd, toTrial=bsd$stageNames[stage],
                   fromTrial=ifelse(stage == 1, NULL, bsd$stageNames[stage-1]))
      bsd &lt;- runVDPtrial(bsd, bsd$stageNames[stage], entries)
    }

    # ... And then run the PIC. Sequencing could be made more complicated
    for (genSel in 1:bsd$nPopImpCycPerYear){
      optCont &lt;- selectParents(bsd)
      bsd &lt;- makeCrosses(bsd, optCont)
    }
  }
  
  endValues &lt;- calcCurrentStatus(bsd)

  print(startValues)
  print(endValues)</code></pre>
</div>
<div id="the-main-interface-for-optimizing-budgets" class="section level3">
<h3>The main interface for optimizing budgets</h3>
<pre class="r"><code>bsd &lt;- burnedInBSD
optimizationResults &lt;- optimizeByLOESS(bsd)
saveRDS(optimizationResults, here::here(&quot;data&quot;, &quot;_optRes.rds&quot;))</code></pre>
<pre class="r"><code>bestAlloc &lt;- which.max(optimizationResults$results$response)
bsd &lt;- burnedInBSD
percentages &lt;- optimizationResults$results %&gt;% 
  dplyr::slice(bestAlloc) %&gt;% 
  dplyr::select(contains(&quot;perc&quot;))
print(&quot;Budget allocations with highest gain&quot;)
print(percentages)
bsd &lt;- runWithBudget(percentages, bsd, returnBSD=T)
plot(AlphaSimR::gv(bsd$varietyCandidates))</code></pre>
<p><img src="figure/BreedSimCostTest.Rmd/Plot%20results-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>plotLoessPred(resultMat=optimizationResults$results)</code></pre>
<p><img src="figure/BreedSimCostTest.Rmd/Plot%20results-2.png" width="672" style="display: block; margin: auto;" /></p>
<pre><code>[1] &quot;Budget allocations with highest gain&quot;
# A tibble: 1 x 4
  percPIC percSDN percCET percPYT
    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1   0.364   0.273   0.273  0.0909
$loPred
$loPred$fit
         1          2          3          4          5          6          7 
 7.2863663 11.7128056 17.9602992 10.3268788  8.5914774  7.2015022  6.0127977 
         8          9         10         11         12         13         14 
 6.0427721  9.1459711  6.0000996  5.5275296  5.6537563  8.6122514 11.2308758 
        15         16         17         18         19         20         21 
34.8173018 12.6349180 13.7485344  9.2255451  9.8122803  7.3312101 12.3041459 
        22         23         24         25         26         27         28 
 8.1363618 12.2387853  5.5568495 -3.5459122  0.2764718  6.5337632  8.3495519 
        29         30         31         32         33         34         35 
 7.0998530  8.2631043 28.3971656  9.3677190 10.8921223  7.9355446 10.2627530 
        36         37         38         39         40         41         42 
 7.1917419 34.8173018 17.9602992 28.3971656  9.8122803 12.3041459 10.2627530 
        43         44         45         46         47         48         49 
12.2387853 12.6349180  7.1917419  9.3677190 13.7485344 10.8921223 34.8173018 
        50         51         52         53         54         55         56 
17.9602992 10.3268788  9.1459711 10.3538542  6.8970279 24.3340031 11.4008854 
        57         58         59         60         61         62         63 
11.8875368  9.8561428  8.8575471  9.3049360 12.1334082  9.4548085  9.1568091 
        64         65         66         67         68         69         70 
 8.8575471  9.4347093 11.3033512 31.2023140 26.1808223 12.0216567  9.5668436 
        71         72         73         74         75         76         77 
11.2654395 12.8467408 34.8173018 34.8173018 34.8173018 31.2023140 12.3041459 
        78         79         80         81         82         83         84 
12.3041459  9.8561428 10.2627530 10.2627530 24.3340031  9.5668436 12.6349180 
        85         86         87         88         89         90         91 
34.8173018 34.8173018 34.8173018  9.8561428  9.5668436  9.1459711 13.8714937 
        92         93         94         95         96         97         98 
34.8173018  9.5960282 31.5633634 10.0620210 10.0620210 34.8173018  9.5448951 
        99        100        101        102        103        104        105 
34.4674102  9.8272000  9.0875141 13.6340720 34.1417094 26.0972762  9.5668436 
       106        107        108        109        110        111        112 
34.8173018  9.5448951  9.2880008 34.8173018 34.8173018 34.8173018 34.8173018 
       113        114        115        116        117        118        119 
34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 
       120        121        122        123        124        125        126 
34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 
       127        128        129        130        131        132        133 
34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 
       134        135        136        137        138        139        140 
34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 34.8173018 
       141        142        143        144 
34.8173018 34.8173018 34.8173018 34.8173018 

$loPred$se.fit
        1         2         3         4         5         6         7         8 
 5.194942 12.525591 18.523066  8.584592  3.814945  8.438015  9.983605  7.559881 
        9        10        11        12        13        14        15        16 
 4.676934 10.304573 12.866761 10.508891  8.361547 10.518752 38.130875  6.447344 
       17        18        19        20        21        22        23        24 
 6.912299  6.972239  7.368253  5.205888  5.467337  7.078151 15.597840  6.094872 
       25        26        27        28        29        30        31        32 
14.414325 11.923329 13.295814  9.270912 11.457491  7.525581 32.475343  4.717582 
       33        34        35        36        37        38        39        40 
10.047509  7.752798  4.750806  6.687329 38.130875 18.523066 32.475343  7.368253 
       41        42        43        44        45        46        47        48 
 5.467337  4.750806 15.597840  6.447344  6.687329  4.717582  6.912299 10.047509 
       49        50        51        52        53        54        55        56 
38.130875 18.523066  8.584592  4.676934  7.812095  6.799129 28.203110  4.728585 
       57        58        59        60        61        62        63        64 
 5.315607  3.658477  3.431524  6.576286  5.691810  4.532368  4.711283  3.431524 
       65        66        67        68        69        70        71        72 
 4.339492  6.073265 32.610563 28.527484  5.043625  3.981308 15.231902 11.255269 
       73        74        75        76        77        78        79        80 
38.130875 38.130875 38.130875 32.610563  5.467337  5.467337  3.658477  4.750806 
       81        82        83        84        85        86        87        88 
 4.750806 28.203110  3.981308  6.447344 38.130875 38.130875 38.130875  3.658477 
       89        90        91        92        93        94        95        96 
 3.981308  4.676934  9.990277 38.130875  3.942041 33.161393  3.499215  3.499215 
       97        98        99       100       101       102       103       104 
38.130875  3.683928 37.603873  3.683747  3.681541  6.297848 41.419375 31.031172 
      105       106       107       108       109       110       111       112 
 3.981308 38.130875  3.683928  3.829414 38.130875 38.130875 38.130875 38.130875 
      113       114       115       116       117       118       119       120 
38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 
      121       122       123       124       125       126       127       128 
38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 
      129       130       131       132       133       134       135       136 
38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 
      137       138       139       140       141       142       143       144 
38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 38.130875 

$loPred$residual.scale
[1] 14.9961

$loPred$df
[1] 126.2933


$bins
&#39;hexbin&#39; object from call: hexbin::hexbin(x = cbind(uptoResults[, budg1], uptoResults[,      budg2]), xbnds = xlim, ybnds = ylim) 
n = 144  points in  nc = 46  hexagon cells in grid dimensions  36 by 31 

$closeBin
  [1] 28 15 15  6 39 30 30 22 46 37 37 32 19  8  8  2 31 23 23 16 38 33 33 26  9
 [26]  3  3  1 24 18 18 11 34 27 27 21  8 15 18 23 38 27 33  2 21 11 31 34  8 15
 [51]  6 46  6 23 27  5  4 45 43  7 11 10 12 43 10 14  8 17 35 44 29 20  8  8  8
 [76]  8 38 38 45 27 27 27 44  2  8  8  8 45 44 46 12  8 44  8 42 42  8 40  8 45
[101] 41 36 13 25 44  8 40 25  8  8  8  8  8  8  8  8  8  8  8  8  8  8  8  8  8
[126]  8  8  8  8  8  8  8  8  8  8  8  8  8  8  8  8  8  8  8

$binMean
 [1]  8.349552 12.634918  3.405118 11.887537 11.400885 10.335871  9.304936
 [8] 34.167863 -3.545912  9.444759 10.289615 11.514151 34.141709 11.303351
[15] 16.398426  7.331210 26.180822 21.685812  8.612251 12.846741  7.191742
[22]  6.042772  8.936783  7.099853 17.692639  5.556850 13.950652  7.286366
[29] 11.265439  6.607150 13.748534  5.653756 10.871311 10.892122 12.021657
[36] 13.634072  5.763815 12.304146  8.591477  9.544895  9.087514 10.062021
[43]  8.857547  9.572680  9.848907  9.145971

$hiCtXY
[1] 0.3635758 0.2728484

$hiGainXY
[1] 0.3635758 0.2728484</code></pre>
<br>
<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-sessioninfo" data-toggle="collapse" data-target="#workflowr-sessioninfo" style="display: block;">
<span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Session information
</button>
</p>
<div id="workflowr-sessioninfo" class="collapse">
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>R version 4.0.5 (2021-03-31)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Mojave 10.14.6

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] grid      parallel  stats     graphics  grDevices utils     datasets 
[8] methods   base     

other attached packages:
 [1] BreedSimCost_0.1.0 optiSel_2.0.5      hexbin_1.28.1      sommer_4.1.3      
 [5] crayon_1.4.1       lattice_0.20-41    MASS_7.3-53.1      lme4_1.1-26       
 [9] Matrix_1.3-2       here_1.0.1         tidyr_1.1.3        dplyr_1.0.6       
[13] AlphaSimR_0.13.0   R6_2.5.0           workflowr_1.6.2   

loaded via a namespace (and not attached):
 [1] magic_1.5-9             foreach_1.5.1           jsonlite_1.7.2         
 [4] splines_4.0.5           ECOSolveR_0.5.4         cccp_0.2-7             
 [7] shiny_1.6.0             assertthat_0.2.1        statmod_1.4.36         
[10] highr_0.9               yaml_2.2.1              numDeriv_2016.8-1.1    
[13] pillar_1.6.0            quadprog_1.5-8          glue_1.4.2             
[16] alabama_2015.3-1        optiSolve_0.1.2         digest_0.6.27          
[19] manipulateWidget_0.10.1 promises_1.2.0.1        minqa_1.2.4            
[22] htmltools_0.5.1.1       httpuv_1.6.1            plyr_1.8.6             
[25] pkgconfig_2.0.3         purrr_0.3.4             xtable_1.8-4           
[28] webshot_0.5.2           whisker_0.4             later_1.2.0            
[31] git2r_0.27.1            shapes_1.2.6            tibble_3.1.1           
[34] generics_0.1.0          pedigree_1.4            ellipsis_0.3.2         
[37] cli_2.5.0               magrittr_2.0.1          mime_0.10              
[40] memoise_1.1.0           evaluate_0.14           kinship2_1.8.5         
[43] fs_1.5.0                fansi_0.4.2             doParallel_1.0.16      
[46] nlme_3.1-152            tools_4.0.5             data.table_1.14.0      
[49] HaploSim_1.8.4          minpack.lm_1.2-1        lifecycle_1.0.0        
[52] pspline_1.0-18          stringr_1.4.0           compiler_4.0.5         
[55] pkgdown_1.6.1           rlang_0.4.11            nloptr_1.2.2.2         
[58] rstudioapi_0.11         iterators_1.0.13        htmlwidgets_1.5.3      
[61] crosstalk_1.1.1         miniUI_0.1.1.1          rmarkdown_2.6          
[64] boot_1.3-27             nadiv_2.17.1            codetools_0.2-18       
[67] abind_1.4-5             DBI_1.1.0               reshape2_1.4.4         
[70] knitr_1.33              fastmap_1.1.0           utf8_1.2.1             
[73] rprojroot_2.0.2         stringi_1.6.1           Rcpp_1.0.6             
[76] vctrs_0.3.8             rgl_0.106.8             scatterplot3d_0.3-41   
[79] tidyselect_1.1.1        xfun_0.22              </code></pre>
</div>
</div>


<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
http://docs.mathjax.org/en/latest/configuration.html.  This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>




</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
